---
layout: page
permalink: /example-commands/jq/
---

<h1>jq</h1>
<h3><small class="text-muted"><a href="https://stedolan.github.io/jq/">jq</a> is a lightweight and flexible
        command-line JSON processor.</small></h3>

<br><br>

<h5>Filter on Object key/value</h5>
<p>Select the array in <code>.items</code>, loop through and select the items which have a <code>.name</code> equal to
    <code>"thisname"</code>, then return the <code>.name</code> and <code>.status</code> </p>

<pre
    class="command-line"><code class="language-bash" data-prismjs-copy="Copy">echo file.json | jq '.items | .[] | select(.name == "thisname") | {name: .name, status: .status}'</code></pre>

<br><br>

<h5>Filter on Object key/value (contains)</h5>
<p>Loop through an array and select the items which have a <code>.name</code> which contains <code>"someText"</code>,
    then return the <code>.name</code> and <code>.status</code>

<pre
    class="command-line"><code class="language-bash">echo file.json | jq '.[] | select( .name | contains("someText") ) | {name: .name, status: .status}'</code></pre>

<br><br>

<h5>Filter on Object key existing</h5>
<p>Select the array in <code>.items</code>, loop through and select the items which have the specified key, then return
    the <code>.name</code></p>

<pre
    class="command-line"><code class="language-bash">echo file.json | jq -r '.items | .[] | select(.a.path.to.an.array[]?.key != null) | .name'</code></pre>

<br><br>

<h5>Filter with multiple conditions</h5>
<p>Use <code>or</code> in a <code>select</code> statement, to filter on multiple conditions</p>

<pre
    class="command-line"><code class="language-bash">echo file.json | jq -r '.items | .[] | select((.status == "Running") or (.status == "Scheduled") or .status == "ConfirmationNeeded") | .name'</code></pre>

<br><br>

<h5>Filter on Object key/value (not contains)</h5>
<p>Loop through an array and select the items which don't have a <code>.name</code> which contains
    <code>"some-text"</code>,
    then return the <code>.name</code>.

<pre
    class="command-line"><code class="language-bash">echo file.json | jq -r '.items | .[] | select(.name | contains("some-text") | not) | .name'</code></pre>

<br><br>

<h5>Add a field to an object</h5>
<p>Assign <code>bar</code> to argument <code>foo</code> and then add the <code>"foo": "bar"</code> key/value to the
    object</p>

<pre class="command-line"><code class="language-bash">
echo '{"hello": "world"}' | jq --arg foo bar '. + {foo: $foo}'
</code></pre>
<pre><code class="language-bash">
{
  "hello": "world",
  "foo": "bar"
}
</code></pre>

<p>Preserve nested objects with <code>*</code></p>
<pre class="command-line"><code class="language-bash">
echo '{"hello": {"value": "world"}}' | jq '. * {"hello": {foo: ("bar")}}'
</code></pre>
<pre><code class="language-bash">
{
  "hello": {
    "value": "world",
    "foo": "bar"
  }
}

</code></pre>

<p>Using <code>+</code> will not preserve nested objects</p>
<pre class="command-line"><code class="language-bash">
echo '{"hello": {"value": "world"}}' | jq '. + {"hello": {foo: ("bar")}}'
</code></pre>
<pre><code class="language-bash">
{
  "hello": {
    "foo": "bar"
  }
}
</code></pre>

<br><br>

<h5>Concat strings</h5>

<pre class="command-line"><code class="language-bash">
echo '{"hello": {"value": "world"}}' | jq --arg foo bar '. * {"hello": {foo: ("not" + $foo)}}'
</code></pre>
<pre><code class="language-bash">
{
  "hello": {
    "value": "world",
    "foo": "notbar"
  }
}
</code></pre>
